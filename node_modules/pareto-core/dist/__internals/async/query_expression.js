"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.direct_error = exports.direct_result = exports.dictionaryx = void 0;
const __query_result_1 = require("./__query_result");
const asynchronous_collection_builder_1 = require("./asynchronous_collection_builder");
const create_asynchronous_processes_monitor_1 = require("./create_asynchronous_processes_monitor");
var dictionaryx;
(function (dictionaryx) {
    dictionaryx.parallel = (dictionary, aggregate_errors) => {
        return (0, __query_result_1.__query_result)((on_success, on_error) => {
            let has_errors = false;
            const errors_builder = (0, asynchronous_collection_builder_1.create_asynchronous_dictionary_builder)();
            const results_builder = (0, asynchronous_collection_builder_1.create_asynchronous_dictionary_builder)();
            (0, create_asynchronous_processes_monitor_1.create_asynchronous_processes_monitor)((monitor) => {
                dictionary.__d_map(($, id) => {
                    monitor['report process started']();
                    $.__extract_data(($) => {
                        results_builder['add entry'](id, $);
                        monitor['report process finished']();
                    }, ($) => {
                        has_errors = true;
                        errors_builder['add entry'](id, $);
                        monitor['report process finished']();
                    });
                });
            }, () => {
                if (has_errors) {
                    on_error(aggregate_errors(errors_builder['get dictionary']()));
                }
                else {
                    on_success(results_builder['get dictionary']());
                }
            });
        });
    };
})(dictionaryx || (exports.dictionaryx = dictionaryx = {}));
const direct_result = (result) => {
    return (0, __query_result_1.__query_result)((on_success, on_error) => {
        on_success(result);
    });
};
exports.direct_result = direct_result;
const direct_error = ($) => {
    return (0, __query_result_1.__query_result)((on_value, on_error) => {
        on_error($);
    });
};
exports.direct_error = direct_error;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnlfZXhwcmVzc2lvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9fX2ludGVybmFscy9hc3luYy9xdWVyeV9leHByZXNzaW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHFEQUFpRDtBQUVqRCx1RkFBMEY7QUFDMUYsbUdBQStGO0FBRy9GLElBQWlCLFdBQVcsQ0F1QzNCO0FBdkNELFdBQWlCLFdBQVc7SUFFWCxvQkFBUSxHQUFHLENBQ3BCLFVBQTZELEVBQzdELGdCQUFxRSxFQUUxQixFQUFFO1FBQzdDLE9BQU8sSUFBQSwrQkFBYyxFQUFDLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQzNDLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQTtZQUN0QixNQUFNLGNBQWMsR0FBRyxJQUFBLHdFQUFzQyxHQUFlLENBQUE7WUFDNUUsTUFBTSxlQUFlLEdBQUcsSUFBQSx3RUFBc0MsR0FBVSxDQUFBO1lBRXhFLElBQUEsNkVBQXFDLEVBQ2pDLENBQUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ1IsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRTtvQkFDekIsT0FBTyxDQUFDLHdCQUF3QixDQUFDLEVBQUUsQ0FBQTtvQkFDbkMsQ0FBQyxDQUFDLGNBQWMsQ0FDWixDQUFDLENBQUMsRUFBRSxFQUFFO3dCQUNGLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUE7d0JBQ25DLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFLENBQUE7b0JBQ3hDLENBQUMsRUFDRCxDQUFDLENBQUMsRUFBRSxFQUFFO3dCQUNGLFVBQVUsR0FBRyxJQUFJLENBQUE7d0JBQ2pCLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUE7d0JBQ2xDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFLENBQUE7b0JBQ3hDLENBQUMsQ0FDSixDQUFBO2dCQUNMLENBQUMsQ0FBQyxDQUFBO1lBQ04sQ0FBQyxFQUNELEdBQUcsRUFBRTtnQkFDRCxJQUFJLFVBQVUsRUFBRSxDQUFDO29CQUNiLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtnQkFDbEUsQ0FBQztxQkFBTSxDQUFDO29CQUNKLFVBQVUsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUE7Z0JBQ25ELENBQUM7WUFDTCxDQUFDLENBQ0osQ0FBQTtRQUNMLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQyxDQUFBO0FBQ0wsQ0FBQyxFQXZDZ0IsV0FBVywyQkFBWCxXQUFXLFFBdUMzQjtBQUVNLE1BQU0sYUFBYSxHQUFHLENBQ3pCLE1BQWMsRUFDYSxFQUFFO0lBQzdCLE9BQU8sSUFBQSwrQkFBYyxFQUFDLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFO1FBQzNDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUN0QixDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUMsQ0FBQTtBQU5ZLFFBQUEsYUFBYSxpQkFNekI7QUFFTSxNQUFNLFlBQVksR0FBRyxDQUN4QixDQUFJLEVBQ2MsRUFBRTtJQUNwQixPQUFPLElBQUEsK0JBQWMsRUFBQyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsRUFBRTtRQUN6QyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDZixDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUMsQ0FBQTtBQU5ZLFFBQUEsWUFBWSxnQkFNeEIifQ==