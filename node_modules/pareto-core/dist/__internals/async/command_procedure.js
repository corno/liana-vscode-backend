"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.command_procedure = void 0;
const command_promise_1 = require("./command_promise");
const handle_command_block_1 = require("./handle_command_block");
const command_procedure = (execution_handler) => {
    return ($cr, $qr) => {
        return {
            'execute': (parameters, error_transformer) => {
                return (0, command_promise_1.__command_promise)({
                    'execute': (on_success, on_error) => {
                        (0, handle_command_block_1.__handle_command_block)(execution_handler(parameters, $cr, $qr)).__start(on_success, ($) => {
                            on_error(error_transformer($));
                        });
                    }
                });
            },
        };
    };
};
exports.command_procedure = command_procedure;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZF9wcm9jZWR1cmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvX19pbnRlcm5hbHMvYXN5bmMvY29tbWFuZF9wcm9jZWR1cmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBR0EsdURBQXFEO0FBQ3JELGlFQUErRDtBQUd4RCxNQUFNLGlCQUFpQixHQUFHLENBQzdCLGlCQUl5QixFQUNnRSxFQUFFO0lBQzNGLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDaEIsT0FBTztZQUNILFNBQVMsRUFBRSxDQUFDLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxFQUFFO2dCQUN6QyxPQUFPLElBQUEsbUNBQWlCLEVBQUM7b0JBQ3JCLFNBQVMsRUFBRSxDQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsRUFBRTt3QkFFaEMsSUFBQSw2Q0FBc0IsRUFBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUNuRSxVQUFVLEVBQ1YsQ0FBQyxDQUFDLEVBQUUsRUFBRTs0QkFDRixRQUFRLENBQ0osaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQ3ZCLENBQUE7d0JBQ0wsQ0FBQyxDQUNKLENBQUE7b0JBQ0wsQ0FBQztpQkFDSixDQUFDLENBQUE7WUFDTixDQUFDO1NBQ0osQ0FBQTtJQUNMLENBQUMsQ0FBQTtBQUNMLENBQUMsQ0FBQTtBQTFCWSxRQUFBLGlCQUFpQixxQkEwQjdCIn0=