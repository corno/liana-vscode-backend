"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.assert = exports.pseudo_query_successfully_executed = exports.if_ = exports.refine_stacked = exports.refine_without_error_transformation = exports.query_stacked = exports.query = exports.fail = exports.nothing = exports.handle_error = exports.dictionaryx = exports.listx = void 0;
const _p_iterate_1 = __importDefault(require("../../_p_iterate"));
const command_promise_1 = require("./command_promise");
const handle_command_block_1 = require("./handle_command_block");
const create_refinement_context_1 = require("./create_refinement_context");
const asynchronous_collection_builder_1 = require("./asynchronous_collection_builder");
const create_asynchronous_processes_monitor_1 = require("./create_asynchronous_processes_monitor");
var listx;
(function (listx) {
    listx.serie = (array) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                (0, _p_iterate_1.default)(array, (iterator) => {
                    const do_next = () => {
                        const next = iterator.look();
                        if (next !== null) {
                            iterator.consume(($) => {
                                $.__start(() => {
                                    do_next();
                                }, on_error);
                            }, {
                                no_more_tokens: () => {
                                    throw new Error("not reachable, just did a look()");
                                }
                            });
                        }
                        else {
                            on_success();
                        }
                    };
                    do_next();
                });
            }
        });
    };
})(listx || (exports.listx = listx = {}));
var dictionaryx;
(function (dictionaryx) {
    dictionaryx.parallel = (dictionary, parametrized_command_block, aggregate_errors) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                const errors_builder = (0, asynchronous_collection_builder_1.create_asynchronous_dictionary_builder)();
                (0, create_asynchronous_processes_monitor_1.create_asynchronous_processes_monitor)((monitor) => {
                    dictionary.__d_map(($, id) => {
                        monitor['report process started']();
                        (0, handle_command_block_1.__handle_command_block)(parametrized_command_block($, id)).__start(() => {
                            monitor['report process finished']();
                        }, (e) => {
                            errors_builder['add entry'](id, e);
                            monitor['report process finished']();
                        });
                    });
                }, () => {
                    const errors = errors_builder['get dictionary']();
                    if (errors.__get_number_of_entries() === 0) {
                        on_success();
                    }
                    else {
                        on_error(aggregate_errors(errors));
                    }
                });
            }
        });
    };
    let deprecated_parallel;
    (function (deprecated_parallel) {
        deprecated_parallel.query = (query_result, parametrized_command_block, aggregate_errors) => {
            return (0, command_promise_1.__command_promise)({
                'execute': (on_success, on_error) => {
                    const errors_builder = (0, asynchronous_collection_builder_1.create_asynchronous_dictionary_builder)();
                    query_result.__extract_data((dictionary) => {
                        (0, create_asynchronous_processes_monitor_1.create_asynchronous_processes_monitor)((monitor) => {
                            dictionary.__d_map(($, id) => {
                                monitor['report process started']();
                                (0, handle_command_block_1.__handle_command_block)(parametrized_command_block($, id)).__start(() => {
                                    monitor['report process finished']();
                                }, (e) => {
                                    errors_builder['add entry'](id, e);
                                    monitor['report process finished']();
                                });
                            });
                        }, () => {
                            const errors = errors_builder['get dictionary']();
                            if (errors.__get_number_of_entries() === 0) {
                                on_success();
                            }
                            else {
                                on_error(aggregate_errors(errors));
                            }
                        });
                    }, on_error);
                }
            });
        };
    })(deprecated_parallel = dictionaryx.deprecated_parallel || (dictionaryx.deprecated_parallel = {}));
})(dictionaryx || (exports.dictionaryx = dictionaryx = {}));
const handle_error = (command_block, parametrized_command_block, assign_target_error) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            (0, handle_command_block_1.__handle_command_block)(command_block).__start(on_success, (e) => {
                (0, handle_command_block_1.__handle_command_block)(parametrized_command_block(e)).__start(() => {
                    on_error(assign_target_error());
                }, on_error);
            });
        }
    });
};
exports.handle_error = handle_error;
const nothing = () => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success) => {
            on_success();
        }
    });
};
exports.nothing = nothing;
const fail = (error) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            on_error(error);
        }
    });
};
exports.fail = fail;
const query = (query_result, refine, parametrized_command_block) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            query_result.__extract_data((output) => {
                (0, create_refinement_context_1.create_refinement_context)((abort) => refine(output, abort)).__extract_data(($) => {
                    (0, handle_command_block_1.__handle_command_block)(parametrized_command_block($)).__start(on_success, on_error);
                }, on_error);
            }, on_error);
        }
    });
};
exports.query = query;
const query_stacked = (query_result, parent_data, parametrized_command_block) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            query_result.__extract_data((output) => {
                (0, handle_command_block_1.__handle_command_block)(parametrized_command_block(output, parent_data)).__start(on_success, on_error);
            }, on_error);
        }
    });
};
exports.query_stacked = query_stacked;
const refine_without_error_transformation = (//I doubt that this one is needed. Either parameters are refined or query results.. parameters should already be refined. 
//the only place where parameters are currently refine is in the main functions. can this be solved by adding a refiner to the main function?
callback, parametrized_command_block) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            (0, create_refinement_context_1.create_refinement_context)(callback).__extract_data((output) => {
                (0, handle_command_block_1.__handle_command_block)(parametrized_command_block(output)).__start(on_success, on_error);
            }, on_error);
        }
    });
};
exports.refine_without_error_transformation = refine_without_error_transformation;
const refine_stacked = (callback, parent_data, parametrized_command_block) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            (0, create_refinement_context_1.create_refinement_context)(callback).__extract_data((output) => {
                (0, handle_command_block_1.__handle_command_block)(parametrized_command_block(output, parent_data)).__start(on_success, on_error);
            }, on_error);
        }
    });
};
exports.refine_stacked = refine_stacked;
var if_;
(function (if_) {
    if_.direct = (precondition, command_block, else_command_block) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                if (precondition) {
                    (0, handle_command_block_1.__handle_command_block)(command_block).__start(on_success, on_error);
                }
                else {
                    if (else_command_block !== undefined) {
                        (0, handle_command_block_1.__handle_command_block)(else_command_block).__start(on_success, on_error);
                    }
                    else {
                        on_success();
                    }
                }
            }
        });
    };
    if_.query = (precondition, command_block, else_command_block) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                precondition.__extract_data(($) => {
                    if ($) {
                        (0, handle_command_block_1.__handle_command_block)(command_block).__start(on_success, on_error);
                    }
                    else {
                        if (else_command_block !== undefined) {
                            (0, handle_command_block_1.__handle_command_block)(else_command_block).__start(on_success, on_error);
                        }
                        else {
                            on_success();
                        }
                    }
                }, on_error);
            }
        });
    };
    if_.on_successfully_executed = (command_block, if_true, if_false) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                (0, handle_command_block_1.__handle_command_block)(command_block).__start(() => {
                    (0, handle_command_block_1.__handle_command_block)(if_true()).__start(on_success, on_error);
                }, (e) => {
                    (0, handle_command_block_1.__handle_command_block)(if_false(e)).__start(on_success, on_error);
                });
            }
        });
    };
})(if_ || (exports.if_ = if_ = {}));
const pseudo_query_successfully_executed = (command_block, on_result) => {
    return (0, command_promise_1.__command_promise)({
        'execute': (on_success, on_error) => {
            (0, handle_command_block_1.__handle_command_block)(command_block).__start(() => {
                (0, handle_command_block_1.__handle_command_block)(on_result(true)).__start(on_success, on_error);
            }, (e) => {
                (0, handle_command_block_1.__handle_command_block)(on_result(false)).__start(on_success, on_error);
            });
        }
    });
};
exports.pseudo_query_successfully_executed = pseudo_query_successfully_executed;
var assert;
(function (assert) {
    assert.direct = (assertion, error_if_failed) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                if (!assertion) {
                    on_error(error_if_failed);
                    return;
                }
                on_success();
            }
        });
    };
    assert.query = (assertion, error_if_failed) => {
        return (0, command_promise_1.__command_promise)({
            'execute': (on_success, on_error) => {
                assertion.__extract_data(($) => {
                    if ($) {
                        on_success();
                    }
                    else {
                        on_error(error_if_failed);
                    }
                }, on_error);
            }
        });
    };
})(assert || (exports.assert = assert = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZF9zdGF0ZW1lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvX19pbnRlcm5hbHMvYXN5bmMvY29tbWFuZF9zdGF0ZW1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUEsa0VBQXlDO0FBRXpDLHVEQUFxRDtBQUNyRCxpRUFBK0Q7QUFFL0QsMkVBQXVFO0FBQ3ZFLHVGQUEwRjtBQUMxRixtR0FBK0Y7QUFJL0YsSUFBaUIsS0FBSyxDQW9DckI7QUFwQ0QsV0FBaUIsS0FBSztJQUVMLFdBQUssR0FBRyxDQUNqQixLQUEyQyxFQUNqQixFQUFFO1FBQzVCLE9BQU8sSUFBQSxtQ0FBaUIsRUFBQztZQUNyQixTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLEVBQUU7Z0JBQ2hDLElBQUEsb0JBQVUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRTtvQkFDM0IsTUFBTSxPQUFPLEdBQUcsR0FBRyxFQUFFO3dCQUNqQixNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUE7d0JBQzVCLElBQUksSUFBSSxLQUFLLElBQUksRUFBRSxDQUFDOzRCQUNoQixRQUFRLENBQUMsT0FBTyxDQUNaLENBQUMsQ0FBQyxFQUFFLEVBQUU7Z0NBQ0YsQ0FBQyxDQUFDLE9BQU8sQ0FDTCxHQUFHLEVBQUU7b0NBQ0QsT0FBTyxFQUFFLENBQUE7Z0NBQ2IsQ0FBQyxFQUNELFFBQVEsQ0FDWCxDQUFBOzRCQUNMLENBQUMsRUFDRDtnQ0FDSSxjQUFjLEVBQUUsR0FBRyxFQUFFO29DQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUE7Z0NBQ3ZELENBQUM7NkJBQ0osQ0FDSixDQUFBO3dCQUNMLENBQUM7NkJBQU0sQ0FBQzs0QkFDSixVQUFVLEVBQUUsQ0FBQTt3QkFDaEIsQ0FBQztvQkFDTCxDQUFDLENBQUE7b0JBQ0QsT0FBTyxFQUFFLENBQUE7Z0JBQ2Is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