"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.__query_result = __query_result;
const create_refinement_context_1 = require("./create_refinement_context");
class Query_Result_Class {
    constructor(executer) {
        this.executer = executer;
        this.__query_result = null;
    }
    transform_result(transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                on_result(transformer($));
            }, on_error);
        });
    }
    query_without_error_transformation(queryer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                queryer($).__extract_data(on_result, on_error);
            }, on_error);
        });
    }
    // query<New_Output, Query_Error>(
    //     queryer: Queryer<New_Output, Query_Error, Output>,
    //     error_transformer: _pi._pi.Transformer<Query_Error, Error>,
    // ): Query_Result<New_Output, Error> {
    //     return new Query_Result_Class<New_Output, Error>((on_result, on_error) => {
    //         this.executer(
    //             ($) => {
    //                 queryer($).__extract_data(
    //                     on_result,
    //                     (queryer_error) => {
    //                         on_error(error_transformer(queryer_error))
    //                     },
    //                 )
    //             },
    //             on_error,
    //         )
    //     })
    // }
    refine_without_error_transformation(callback) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                (0, create_refinement_context_1.create_refinement_context)((abort) => callback($, abort)).__extract_data(on_result, on_error);
            }, on_error);
        });
    }
    rework_error_temp(error_reworker, rework_error_transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(on_result, ($) => {
                error_reworker($).__extract_data((new_target_error) => {
                    on_error(new_target_error);
                }, (rework_error) => {
                    on_error(rework_error_transformer(rework_error));
                });
            });
        });
    }
    __extract_data(on_result, on_error) {
        this.executer(on_result, on_error);
    }
}
function __query_result(executer) {
    return new Query_Result_Class(executer);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX19xdWVyeV9yZXN1bHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvX19pbnRlcm5hbHMvYXN5bmMvX19xdWVyeV9yZXN1bHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUE0SEEsd0NBS0M7QUFoSUQsMkVBQXVFO0FBa0J2RSxNQUFNLGtCQUFrQjtJQUVwQixZQUFZLFFBQWlDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFBO0lBQzlCLENBQUM7SUFLRCxnQkFBZ0IsQ0FDWixXQUFnRDtRQUVoRCxPQUFPLElBQUksa0JBQWtCLENBQW9CLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQ3JFLElBQUksQ0FBQyxRQUFRLENBQ1QsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDRixTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDN0IsQ0FBQyxFQUNELFFBQVEsQ0FDWCxDQUFBO1FBQ0wsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsa0NBQWtDLENBQzlCLE9BQTJDO1FBRTNDLE9BQU8sSUFBSSxrQkFBa0IsQ0FBb0IsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLEVBQUU7WUFDckUsSUFBSSxDQUFDLFFBQVEsQ0FDVCxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUNGLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQ3JCLFNBQVMsRUFDVCxRQUFRLENBQ1gsQ0FBQTtZQUNMLENBQUMsRUFDRCxRQUFRLENBQ1gsQ0FBQTtRQUNMLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVELGtDQUFrQztJQUNsQyx5REFBeUQ7SUFDekQsa0VBQWtFO0lBQ2xFLHVDQUF1QztJQUN2QyxrRkFBa0Y7SUFDbEYseUJBQXlCO0lBQ3pCLHVCQUF1QjtJQUN2Qiw2Q0FBNkM7SUFDN0MsaUNBQWlDO0lBQ2pDLDJDQUEyQztJQUMzQyxxRUFBcUU7SUFDckUseUJBQXlCO0lBQ3pCLG9CQUFvQjtJQUNwQixpQkFBaUI7SUFDakIsd0JBQXdCO0lBQ3hCLFlBQVk7SUFDWixTQUFTO0lBQ1QsSUFBSTtJQUdKLG1DQUFtQyxDQUMvQixRQUE0RDtRQUU1RCxPQUFPLElBQUksa0JBQWtCLENBQW9CLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQ3JFLElBQUksQ0FBQyxRQUFRLENBQ1QsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDRixJQUFBLHFEQUF5QixFQUFvQixDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FDdEYsU0FBUyxFQUNULFFBQVEsQ0FDWCxDQUFBO1lBQ0wsQ0FBQyxFQUNELFFBQVEsQ0FDWCxDQUFBO1FBQ0wsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsaUJBQWlCLENBQ2IsY0FBdUQsRUFDdkQsd0JBQWtFO1FBRWxFLE9BQU8sSUFBSSxrQkFBa0IsQ0FBb0IsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLEVBQUU7WUFDckUsSUFBSSxDQUFDLFFBQVEsQ0FDVCxTQUFTLEVBQ1QsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDRixjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUM1QixDQUFDLGdCQUFnQixFQUFFLEVBQUU7b0JBQ2pCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO2dCQUM5QixDQUFDLEVBQ0QsQ0FBQyxZQUFZLEVBQUUsRUFBRTtvQkFDYixRQUFRLENBQUMsd0JBQXdCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQTtnQkFDcEQsQ0FBQyxDQUNKLENBQUE7WUFDTCxDQUFDLENBQ0osQ0FBQTtRQUNMLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUVELGNBQWMsQ0FDVixTQUE4QixFQUM5QixRQUE0QjtRQUU1QixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUN0QyxDQUFDO0NBQ0o7QUFHRCxTQUFnQixjQUFjLENBQzFCLFFBQXdCO0lBRXhCLE9BQU8sSUFBSSxrQkFBa0IsQ0FBTyxRQUFRLENBQUMsQ0FBQTtBQUVqRCxDQUFDIn0=