"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.create_refinement_context = void 0;
const create_refinement_context = (callback) => {
    return ({
        __extract_data(on_result, on_error) {
            class Refine_Guard_Abort_Error {
                constructor(error) {
                    this.error = error;
                }
            }
            try {
                on_result(callback((error) => {
                    throw new Refine_Guard_Abort_Error(error);
                }));
            }
            catch (e) {
                if (e instanceof Refine_Guard_Abort_Error) {
                    on_error(e.error);
                }
                else {
                    throw e; // re-throw unexpected errors
                }
            }
        }
    });
};
exports.create_refinement_context = create_refinement_context;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlX3JlZmluZW1lbnRfY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9fX2ludGVybmFscy9hc3luYy9jcmVhdGVfcmVmaW5lbWVudF9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQVlPLE1BQU0seUJBQXlCLEdBQUcsQ0FDckMsUUFBNkMsRUFDYixFQUFFO0lBQ2xDLE9BQU8sQ0FBQztRQUNKLGNBQWMsQ0FDVixTQUE4QixFQUM5QixRQUE0QjtZQUU1QixNQUFNLHdCQUF3QjtnQkFDMUIsWUFDb0IsS0FBWTtvQkFBWixVQUFLLEdBQUwsS0FBSyxDQUFPO2dCQUM1QixDQUFDO2FBQ1I7WUFDRCxJQUFJLENBQUM7Z0JBQ0QsU0FBUyxDQUNMLFFBQVEsQ0FDSixDQUFDLEtBQUssRUFBRSxFQUFFO29CQUNOLE1BQU0sSUFBSSx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDOUMsQ0FBQyxDQUNKLENBQ0osQ0FBQTtZQUNMLENBQUM7WUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO2dCQUNULElBQUksQ0FBQyxZQUFZLHdCQUF3QixFQUFFLENBQUM7b0JBQ3hDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7Z0JBQ3JCLENBQUM7cUJBQU0sQ0FBQztvQkFDSixNQUFNLENBQUMsQ0FBQSxDQUFDLDZCQUE2QjtnQkFDekMsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO0tBQ0osQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBOUJZLFFBQUEseUJBQXlCLDZCQThCckMifQ==